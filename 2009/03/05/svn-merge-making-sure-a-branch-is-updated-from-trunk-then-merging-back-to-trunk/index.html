<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta name="generator" content="Hugo 0.20.7" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> SVN Merge, making sure a branch is updated from trunk, then merging back to trunk </title>

     
      
    
    
    
    
    

  <meta name="author" content="alan">

 
    <meta property="og:title" content="SVN Merge, making sure a branch is updated from trunk, then merging back to trunk" />
<meta property="og:description" content="So I&#8217;ve just fought a battle w/ SVN merge and thought I&#8217;d post the solution in case others might find it&#8230;
Scenario
Our stable code is in trunk svn://svn.domain.tld/repository/trunk
I&#8217;ve got a branch of trunk svn://svn.domain.tld/repository/branches/dev
Changes have been made to my branch and changes have been made to trunk, since I branched.
I&#8217;m ready to merge my branch back into trunk.
Approach / Overview
Basically, to be safe, I need to first update my branch with the changes from trunk and resolve any conflicts." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zeroasterisk.com/2009/03/05/svn-merge-making-sure-a-branch-is-updated-from-trunk-then-merging-back-to-trunk/" />



<meta property="article:published_time" content="2009-03-05T17:49:34&#43;00:00"/>
<meta property="article:modified_time" content="2009-03-05T17:49:34&#43;00:00"/>










 
    



  <meta property="og:image" content="https://en.gravatar.com/userimage/831761/080d157cba7201fa2d89172617f6b7bb.jpg?size=200">

 
    
     
    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-2011466-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>
 
    
    
    <link rel="canonical" href="https://zeroasterisk.com/2009/03/05/svn-merge-making-sure-a-branch-is-updated-from-trunk-then-merging-back-to-trunk/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/flatly/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="https://zeroasterisk.com/css/landing.css"> 
<link rel="stylesheet" href="https://zeroasterisk.com/css/blog-post.css"> 
<link rel="stylesheet" href="https://zeroasterisk.com/css/code-highlighting/dark.css">
<link rel="stylesheet" href="https://zeroasterisk.com/css/custom.css"> 
 
    
    
</head>


<body>
    <header> <nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="https://zeroasterisk.com/">
        <img src="https://zeroasterisk.com/img/logo-zeroasterisk-on-blue.png" alt="Zeroasterisk | Alan Blount">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/zeroasterisk">
        <span class="icon">
            <i class="fa fa-github"></i>
          </span>
    </a>
    
    

    <a class="nav-item" target="blank" href="https://twitter.com/zeroasterisk">
        <span class="icon">
            <i class="fa fa-twitter"></i>
          </span>
    </a>
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab " href="https://zeroasterisk.com/about/"><span itemprop="name">Abouts</span></a>
        
        <a itemprop="url" class="nav-item is-tab  is-active" href="https://zeroasterisk.com/post/"><span itemprop="name">Posts</span></a>
        
</div>
</nav>
 </header>
    <main>

<div class="container" itemscope itemtype="http://schema.org/BlogPosting">
     
<meta itemprop="name" content="SVN Merge, making sure a branch is updated from trunk, then merging back to trunk">
<meta itemprop="description" content="So I&#8217;ve just fought a battle w/ SVN merge and thought I&#8217;d post the solution in case others might find it&#8230;
Scenario
Our stable code is in trunk svn://svn.domain.tld/repository/trunk
I&#8217;ve got a branch of trunk svn://svn.domain.tld/repository/branches/dev
Changes have been made to my branch and changes have been made to trunk, since I branched.
I&#8217;m ready to merge my branch back into trunk.
Approach / Overview
Basically, to be safe, I need to first update my branch with the changes from trunk and resolve any conflicts.">


<meta itemprop="dateModified" content="2009-03-05T17:49:34&#43;00:00" />
<meta itemprop="wordCount" content="810">



<meta itemprop="keywords" content="adobe-connect,alan,anita,art,cakephp,cordova-/-phonegap,development,event/news,friends-blogs,geek,general,japan,js,laughable,learning-developers,linux,look-at-this,meteorjs,oliver,penelope,php,political,pregnancy,thoughts,alan,beforesave,birth,cake,cakephp,california,childbirth,code,cron,docker,doula,family,geek,git,github,google,google-apps,google-docs,heal,home-birth,homework,internet-explorer-6,kids,linux,master,midwifery,monitor,mysql,new-developers,oliver,open-source,php,poppy,programming,replication,slave,sonoma,tech-web,test,test-heal,vacation,vacation-wedding,wedding," />

    <section class="hero is-primary is-medium">
        <div class="hero-body">
            <div class="container has-text-centered">
                <h1 class="title is-2" itemprop="headline">
                    SVN Merge, making sure a branch is updated from trunk, then merging back to trunk
                </h1>
                
            </div>
        </div>
    </section>
    <section class="section blog">
        <div class="container">
            <p><span class="icon">
  <i class="fa fa-clock-o" aria-hidden="true"></i>
</span>
<span>4 minute read</span>
<span class="icon">
 <i class="fa fa-pencil" aria-hidden="true"></i>
</span>

  Published: <time datetime="2009-03-05T17:49:34&#43;00:00">5 Mar, 2009</time>

</p>
            <div class="columns is-mobile">
                <div class="column">

                    <div class="content blog-post section" itemprop="articleBody">

                        
                        <hr>
                        

<p>So I&#8217;ve just fought a battle w/ SVN merge and thought I&#8217;d post the solution in case others might find it&#8230;</p>

<p><strong>Scenario</strong></p>

<p>Our stable code is in trunk svn://svn.domain.tld/repository/trunk</p>

<p>I&#8217;ve got a branch of trunk svn://svn.domain.tld/repository/branches/dev</p>

<p>Changes have been made to my branch and changes have been made to trunk, since I branched.</p>

<p>I&#8217;m ready to merge my branch back into trunk.</p>

<p><strong>Approach / Overview</strong></p>

<p>Basically, to be safe, I need to first update my branch with the changes from trunk and resolve any conflicts. Then test my branch and code again (since I will likely have resolved conflicts and thus made changes to my code). Then finally, merge my updated branch into trunk.</p>

<p><strong>Step 1 &#8211; update/merge branch from trunk</strong></p>

<p>`# cd /path-to-my-working-copy-of-the-dev-branch<br /></p>

<h1 id="svn-up-br">svn up<br /></h1>

<h1 id="svn-log-q-stop-on-copy">svn log -q &ndash;stop-on-copy`</h1>

<p>if the last revision listed is something like r999, the branch was created at revision 999&#8230; take note of this number in your case. Anytime you see me use &#8220;999&#8221; you&#8217;ll want to replace it with your own revision number.</p>

<p><code># svn merge --dry-run -r 999:HEAD svn://svn.domain.tld/repository/trunk</code></p>

<p>review the results&#8230; conflicts will be prefaced with a C. If you&#8217;ve got a long list, you can send the results of the dry-run to a text file and review the results there</p>

<p><code># svn merge --dry-run -r 999:HEAD svn://svn.domain.tld/repository/trunk &gt; ../merge-results.txt</code></p>

<p>after being sure you want to do this, do the merge, updating the branch with changes from trunk</p>

<p><code># svn merge -r 999:HEAD svn://svn.domain.tld/repository/trunk</code></p>

<p>SVN tries to automatically merge changed files as best it can. As conflicts are found, it will prompt you, asking you how you want to handle them. If you are sure your version in the branch is correct, you can use &#8220;mf&#8221; (mine full) to resolve this conflict&#8230; if you are sure the trunk version is correct, you can use &#8220;tf&#8221; (theirs full) to resolve this conflict. More often than not, though, the differences will take manual looking at and sometimes manual editing. You can use &#8220;df&#8221; or &#8220;e&#8221; to do so in the console, but I usually use &#8220;p&#8221; to postone conflict resolution, which creates some extra files and breaks the conflicted file till resolved.</p>

<p>You&#8217;ll probably have several conflicts&#8230; that&#8217;s fine, postpone as much as you need to and we will clean them up when done.</p>

<p>When done, lets get a list of conflicts</p>

<p><code># svn st | grep C</code></p>

<p>For each of those files, you&#8217;re going to need to fix the conflict. Open them in your favorite editor and look for a line starting with</p>

<p>    <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; .merge-right.r###</code> or something like that&#8230; that&#8217;s where one version starts, at a line starting with</p>

<p>    <code>=======</code> is where that version ends and the next starts, and that one goes until the next</p>

<p>    <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; .merge-right.r###</code>.</p>

<p>You can also diff the other file-copies it will create with different suffixes&#8230; Basically, your goal is to FIX the file in question, it doesn&#8217;t matter what you do with the other file-copies with different suffixes, because the next step will remove them automatically.</p>

<p><code># svn resolved ./path-to/file-in-conflict-state.ext</code></p>

<p>Keep checking for conflicts, and resolving them manually (this is the tedious part)</p>

<p><code># svn st | grep C</code></p>

<p>Once you get all of the conflicts resolved, just to be safe, check out the differences/status of the working copy</p>

<p><code># svn st</code></p>

<p>Test your code</p>

<p>If that looks correct and your code passes QA, lets commit the branch&#8230; finalizing our update/merge</p>

<p><code># svn ci -m &quot;MERGED: updated ./branches/dev with the latest from ./trunk&quot;</code></p>

<p><strong>Step 2 &#8211; update/merge trunk from branch</strong></p>

<p><code># cd /path-to-my-working-copy-of-the-trunk</code></p>

<p><code># svn up</code></p>

<p>Remember the revision where we created our branch, from step one? Anytime you see me use &#8220;999&#8221; you&#8217;ll want to replace it with your own revision number.</p>

<p><code># svn merge --dry-run -r 999:HEAD svn://svn.domain.tld/repository/branches/dev</code></p>

<p><code># svn merge -r 999:HEAD svn://svn.domain.tld/repository/branches/dev</code></p>

<p><code># svn st | grep C</code></p>

<p>Fix all of your conflicts. Usually, you can use &#8220;tf&#8221; (theirs full) to accept the version from your branch to overwrite the version in your trunk&#8230; since you&#8217;ve just gone through the trouble of resolving conflicts on your branch&#8230; but if you&#8217;re not 100% sure, manually review them as discussed in step 1.</p>

<p>Once you get all of the conflicts resolved, just to be safe, check out the differences/status of the working copy</p>

<p><code># svn st</code></p>

<p>Test your code</p>

<p>If that looks correct and your code passes QA, lets commit the trunk&#8230; finalizing our update/merge</p>

<p><code># svn ci -m &quot;MERGED: updated ./trunk with the latest from ./branches/dev&quot;</code></p>

<p>That&#8217;s it.</p>

<p>Easy right?</p>

<p>Not quite.</p>

<p>But, I firmly believe the benefits to using SVN far outweigh the headaches. If you&#8217;re sick and tired of complicated merge-processes, you should checkout <a href="http://git-scm.com/">GIT</a>&#8230; an alternative to SVN which handles merges and branching and whatnot much much easier and simpler. We are sticking w/ SVN for now because we&#8217;re already committed, but I&#8217;ve heard nothing but good things about GIT.</p>

                    </div>
                    <div class="title is-4">
                        <p>
  Published
  
    
      by <span itemprop="author">alan</span>
    
  
  <time datetime="2009-03-05T17:49:34&#43;00:00">
    5 Mar, 2009
  </time>
  
    in <span itemprop="articleSection"><a href="https://zeroasterisk.com/categories/development/">development</a>, <a href="https://zeroasterisk.com/categories/geek/">geek</a> and <a href="https://zeroasterisk.com/categories/php/">php</a></span>
  
  
  using <span itemprop="wordCount">810</span> words.
</p>

                        



                    </div>
          
                    
                    <article>

                        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'zeroasterisk';
    var disqus_identifier = 'https:\/\/zeroasterisk.com\/2009\/03\/05\/svn-merge-making-sure-a-branch-is-updated-from-trunk-then-merging-back-to-trunk\/';
    var disqus_title = 'SVN Merge, making sure a branch is updated from trunk, then merging back to trunk';
    var disqus_url = 'https:\/\/zeroasterisk.com\/2009\/03\/05\/svn-merge-making-sure-a-branch-is-updated-from-trunk-then-merging-back-to-trunk\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                    </article>
                    
            
                </div>
            </div>
        
        </div>
    </section>
</div>

</main>
    <footer> 
<footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
              &copy;
              <a rel="noopener" href="https://alanblount.com/">
                Alan Blount
              </a>
              &middot;
              For more nerdy stuff checkout
              <a rel="noopener" href="https://code.zeroasterisk.com/">code.zeroasterisk.com</a>
              <em class="muted">~</em>
              <a target="_blank" rel="noopener" href="https://github.com/zeroasterisk/">
                <i class="fa fa-github"></i>
              </a>
            </p>
        </div>
    </div>
</footer>


 </footer>

    <script async type="text/javascript" src="https://zeroasterisk.com/js/bulma.js"></script>
    <script async type="text/javascript"  src="https://zeroasterisk.com/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="https://zeroasterisk.com/js/clip.js"></script>
</body>

</html>